{"level":"error","message":{"error":{"message":"AuthorizationError is not defined","stack":"ReferenceError: AuthorizationError is not defined\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:116:9\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at validateCertificate (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:46:3)\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/middleware/validation/validator.js:22:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:08:31"}
{"level":"error","message":{"error":{"code":"AUTHORIZATION_ERROR","message":"User must belong to an organization to issue certificates","stack":"Error: User must belong to an organization to issue certificates\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:117:15\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at validateCertificate (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:47:3)\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/middleware/validation/validator.js:22:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:09:54"}
{"level":"error","message":{"error":{"code":"AUTHORIZATION_ERROR","message":"User must belong to an organization to issue certificates","stack":"Error: User must belong to an organization to issue certificates\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:117:15\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at validateCertificate (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:47:3)\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/middleware/validation/validator.js:22:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:11:19"}
{"level":"error","message":{"error":{"code":"AUTHORIZATION_ERROR","message":"User must belong to an organization to issue certificates","stack":"Error: User must belong to an organization to issue certificates\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:117:15\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at validateCertificate (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:47:3)\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/middleware/validation/validator.js:22:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:13:42"}
{"level":"error","message":{"error":{"message":"userData is not defined","stack":"ReferenceError: userData is not defined\n    at login (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/controllers/authController.js:86:77)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/auth/login"}},"timestamp":"2025-09-27 14:18:05"}
{"level":"error","message":{"error":{"code":"AUTHORIZATION_ERROR","message":"User must belong to an organization to issue certificates","stack":"Error: User must belong to an organization to issue certificates\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:117:15\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at validateCertificate (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:47:3)\n    at Layer.handleRequest (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/node_modules/router/lib/route.js:157:13)\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/middleware/validation/validator.js:22:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","statusCode":403},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:18:37"}
{"level":"error","message":{"error":{"message":"userData is not defined","stack":"ReferenceError: userData is not defined\n    at login (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/controllers/authController.js:86:77)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/auth/login"}},"timestamp":"2025-09-27 14:19:16"}
{"level":"error","message":"Transaction txn_1759000944008_9yhuuivne failed, initiating rollback Operation failed: Could not find the table 'public.activity_logs' in the schema cache","stack":"Error: Operation failed: Could not find the table 'public.activity_logs' in the schema cache\n    at DatabaseTransaction.execute (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/utils/database/transactions.js:36:17)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:179:22","timestamp":"2025-09-27 14:22:25"}
{"level":"error","message":"CRITICAL: Rollback failed for transaction txn_1759000944008_9yhuuivne Transaction failed and was rolled back: Operation failed: Could not find the table 'public.activity_logs' in the schema cache","stack":"Error: Transaction failed and was rolled back: Operation failed: Could not find the table 'public.activity_logs' in the schema cache\n    at DatabaseTransaction.execute (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/utils/database/transactions.js:59:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:179:22","timestamp":"2025-09-27 14:22:25"}
{"level":"error","message":{"error":{"message":"Transaction failed and rollback failed: Operation failed: Could not find the table 'public.activity_logs' in the schema cache | Rollback: Transaction failed and was rolled back: Operation failed: Could not find the table 'public.activity_logs' in the schema cache","stack":"Error: Transaction failed and rollback failed: Operation failed: Could not find the table 'public.activity_logs' in the schema cache | Rollback: Transaction failed and was rolled back: Operation failed: Could not find the table 'public.activity_logs' in the schema cache\n    at DatabaseTransaction.execute (/Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/utils/database/transactions.js:62:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:179:22"},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:22:25"}
{"level":"error","message":{"error":{"message":"logger is not defined","stack":"ReferenceError: logger is not defined\n    at /Users/macbookpro/Desktop/verichain/verichain-v2/backend/src/api/v1/routes/certificates.js:194:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)"},"request":{"ip":"127.0.0.1","method":"POST","url":"/api/v1/certificates","user":"0bc909ee-cebf-4e74-ba5f-613e43613b0b"}},"timestamp":"2025-09-27 14:24:26"}
